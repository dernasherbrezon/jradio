package ru.r2cloud.jradio.fox;

import static org.junit.Assert.assertTrue;

import org.junit.Test;

import ru.r2cloud.jradio.TestUtil;
import ru.r2cloud.jradio.fec.ViterbiTest;

public class FoxPictureDecoderTest {
	
	@Test
	public void testSuccess() throws Exception {
		byte[] data = ViterbiTest.hexStringToByteArray("2C02181E66000000009B0B00000000000000245BB42B5BB42CEBB155A7765AA7765B17750E59FD702B78B2812AC212909FF7795810B80B6507011318000000000000000000FD0B00000000000000C03EDABF4DD8A84DD881088A80388988E887FFFFFFCADB94CCE195E422C70B2DC06010EE000200374500553507080000000000600A000000000000000000000100000100000000000000000000005A07004E105E94610BA7A24914824054B0010100000045005535070800000300CCAACCAACC143188EC8CD6280E679F23B6DFFEB53D0DB48998AE8E7DC555A5D8C531E90971FBD65909E9BBA527D8948FF5381FDE0B8A570B10CD6EB1AEFE08FD6ABF97111B951948E7A538B62D0B11DD4D12E2150C7D73FE14D7D4AF30036231D33B2AAC9EE037635C677DC9E4739000A6C3A73097747F3E0F0C38C51F0F40DCB4D004FBFF0039F4504D3D2DE56188ADA04F771CD2B8EC116926306495D493DC2F4A9556D2D80390CC7D707F4A39BA21A562C2DEC446C46191FC230315135CC727CB31E3B05A5CAC2E2AFF006784C4BA86CFF651C66A312BACB8B7B97117F0AB159320FE829D9F60BA1CC9332665B84C0E30500A8A4B58A5D9B581C7518E4D174B641613ECA80138E7FDEA7B1B6B642D2EC031C60F27F0A39986853B8B8B466536EB91D587239FCB145BEA2D116DEA191860281C0AA8C5F526E1E7AC8B97031E9D6AA5C485C0504EDF4A396DA05F42A14E3A5371DB15A901B4E2942F14AE34876001498A450A314D2BE940AE262902D31014E29381E94009F414F831F688B72E5770C8F519AE0CD7FDC2BFF825F931A3AACCAACCAACC14357EDE4B94DFF3A8E7F89B2DFA54F1CB07271B97D00D9FA56B67D0E7B922DC839F2C346AA3AEE0BFAD48669701D8C850F72D914ADDC08E7BD7420065C11DF9C545F6C5DBB0B28CFDEE339A7CA171F1DC155C21551EA78AB30FD9E5E2593CE3EAC7007D28B0265A6B68635DCB220C76CE69C8C8E8177305EE6A357B96392EED2201549E78C6D352889656DDE63A0FF678A2CF704C5105B4836FDB5CE3A80F9FD290D95B633E6B1FC28BBEC16295D456D193DB8EA78CD56302BA0009607B118AA8B6268912D2D55864923D0022AC06F2C9105B018FE26E69B6DE80958A8ECEEDBE49A2CE780BDA98D3165EB9C7A535B59084457719EA073F31E953C5F6751993CB27E99A1821CCF1380A15B6FA91C528B581F0338F5E08FE753AA1D86CF6FE58C42E08F7154DA33FC4E0534FB8588994629981E956213069B4584C5028287B5310EF24E3918FAD01028FBC0D2BF60B0AA8A7A0A6B01D31F9D218C3182796C7D297C9887392D4D37D042141DB8A68C2B0273807B57066B7FA857FF04BFF0049633FAACCAACCAACC143960DC58A33261DF6AFD33492448BF74F1EA6B5BB39C8F2411D0E2A512F1FEAD7F1357B8134535A2C3B65B50CD9CEECD400C3BBFD59C76E6959F7017311FE16A0ED0A307F0A7A80F49368EF4F69CB2ED0481DFD695815C709FCB0BE59C9F5604E3F3AD0B3D51604F9DBE6CF7C1FE7435705A173FB5EC59012324760A3FA5588AE6CE78C156451FEFFF004ACF91A2EE56BE8E2917CB0E993C8F939FCEB3C42FBF92481DE88B065948894C27979F5CE69459BC8C01990E7F8539A600FA5BA8246EDA3AE7031F9D43F638C264E31D8EEFF0E28E70B113C2B10E36E7EB9A8D632CD959573E8055262B120672D8923F33F4A91647847CA1631F9D2D008DAE588C799C7D2A16DB8CEE24FA534BB010B106998AB4896C36D395430C50217628E8314A011F768014863C1E69E90A639524FD696DB0D0A42818119CFE550955CF3F9524035881D062A32D9AA484D8C27039348AC9BD43739238AE1CD7FDC2BFF825FF00A4B1239F760E1EEB2BDF60C629CB62A89B8CAEDECC6AEEBA230B0436D021E55037B8A49A5109FDDAA13EC99C517602C573B58798081DC9E2AD2379C3F75342B918CB64E3F95371EC08B96914D144C1DA2B827EEB12463F01D69F3938C4712AFB0E4D468C68AD929CB0C11DCD52B890DC36E92E0951DB771F9534900D8E2B7FF9E65BF0C55B59EDE24E3E5F6C553B821AB7D6A87FD5313FCEAC25F19C848AD42AF4CB734723B05C77EF647236A63B614F1577ECB0ADA02AC867EE029FFF00554BD16852284B6518CB323B93F855278D55F60B5031DDB18A69F41344B1C10326256D80F3840071F956847A768AC88A4DC2B11F798EECFE42A9B6B6124BA99D358C30C8E0B23824ED652471EE29915BDA951BC0527A9209FF003F950A4DA15AC586B6B20998C03CFCA4547F39023560831DF145DBD18ED62A90D13EE31EE239C9EF529BCBBF2F940ABD413915564D137B14A576392EE09FAD46242A729F29F51549761122DCDC15C19DF1E9BB19A78BB709FEB5F3D8003FAD271434C82495E439639351906849201BB09ED49B29887051E94BC0E8281A1B498A5600229628CBCC880E32C067D2B8735FF70AFF00E097E4C0B628CB706689848773939049EF4DD258FF006D586063FD223FFD08573668AD81AF6FE497E4C88B3F33EF57ED35785E78DCC260F9F73C292958DBDFF1C63D39A1C6E06ADA5EDA4576A2C5E4545C8752BC04279C91E99FD2AE33B69F399E182311C7196134679F9B006413CF4358B4D6E03A3965B7BCF36DCA33391E7A98C601C6739E7D7A7B0F4A64B0AE9624B892E775BC8C00053B123381938F6A5A20462F8A2C0C7651C0A5B646A591820049C8C0247B66B83756535D143AA339AB1092D9E18FE75B3E1E6DFABD886E36DC47FF00A167FC2B0CD7FDC2BFF825F93263B9BABC89DDF681E644AA78C6782587238C1E3D69AD7724C0D534DFB34B2380ED16F00BB0C6588DC7DBBFEB598571D2B48BD00AF3A2F078E78AAA27F2FA3706B5A6FA194D59DD16E1D4D000AD9CF4E98ABB380445E51DCECC0141D71EB5C59AC6D81ACFFBB2FC98459F6833C751F9D391430C0751EC681A0DA40DCBDBDE914E3DFF001A5B858984DBBCB122A155E338DA48F723AFD4D0C88640391CE08A434248EC06DDCC533919A8C119E7AD241B16A34B3687779ED1CDC70E32BEE7814CD887E60502E70423F3F803CD2BEA31C6281508F30E719195C73F81351A8DC7870CC0700027F034AE0357CB6F94FCA7D4B605232EC23E7191DC1E28158154F51839E39E453D5406025DCBEE0723F038A01006DD8048C0FEEE01C7F5A729D9F3AB671DFD7F3A965202C980015271C7FF005E9624769E24642A85C29C12319F7AF3F35FF70AFF00E097E4C0219E6824DB14C8092A4024639E45160155AE044CAA8C5304300A4647A9A891ADDB2AC8EBC8C10D9C7AF5A49760255841843473A484AFCD116DADD7B73CF7AB11C532DB79855E6B790A90CADB829CF43E87B527A6E52222CA559011F742B36DDDEBCFB75A19833E53CBC800B31071F5C64FF2A4160912095D02C6D096180DC94623DB03155CA95051947FDF59A100E68DE18F077290412846D23DF348B2CA8DB81DDEA0E1BF9FF3A044AABBD55ADE45073FEADBE51FCF1FFEBA8C47712160911CA9F9963FE13F4EB4B4D8761A034A563F2903F39E7058FD3A76A758111EA56C5F09B664273C63915C19AFFB857FF04BF26163A963AA5C5B3B59DB20908722357550147BD74F6BA2C9A9DBA8D56E58C60EE31215009FA81C015B4A292BCB7325A86B5A069D6D1DB5C5AA086547C6D09BCCA4E063191EF556DEDBC35616BF68BD613CD92446CC0B9E4F1B074A88D69BD8764893468EC974D9E26B948D647DC88922EF00F6248CF6E950E9D676D36BB7D6CA6492C9D15A432960CC3B8CFA73C1A6B994973022C9F06C52EA8B7163234764D85680B65B6E3B139CF6EB582DA1CF6FE2492C12548660AD2464B0C30FE156E98E0D3856DA2C1AD0A90584A6466B558E43679925065D9BC03D473E83B73CD59378F7B6B1A2DA0827258A3969083D73B467190063FC6B4BA9AB6C25A0C4874D00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000088E8EA91FB69BD402327C150639C5CF2E9506B09F7E135BCCE0A0430215BC32B7B773DDEF1D66AB891AF5AE0B82B72E1A9AF404D94700F6777A84473F0E07782E56F646524331721FFD95C5EA77D60744C449741847EB2245B277265BA1AD22ABDCA32668A6B22CA733E404D7FDD4819B8AE10F461278702322F4C130A182DE6A12A08438C439AB708812ACE862405A6E16B5F83819FB22B0E4BCDD9627C54CE85F1347F1669D497BEE6C539C7096756CBEE5C9416EEBBB17FA869FA6C34D778D6F10DE1A0F3EE1B0DE69A0DC43BE953114197794336043BB9BE690524AD25A1150B101EEED330EC7FEE6FCD5B8B8756FFE39E65D16AE3CB6409EA56E03950A07DB425146ECEA13A64EF406ECF5261E4854DB6956E97D5B146C7BA9A5336E2A7B2D4AE9B2325128BEB84EF6D91D423D9B1315AC3730578EEB0C9B436758DB153063A7A44CE77CC87F83A3C8629100B0C8AA89577C32767676F88F2C8B08FCB38A6552B7ED2168C20A1867EE9A89FE2664877531250B329496C6B67453A179EBE3CFC1D5837F8297E1EB849FCE8B73C96972B490260F76053029DC17CA0F74F81014A8604CC1DA5D6DE323DEB0CB17DDDE7F9EFA36BBD584019D7ADB56919B74AE18B2D5B9D28EDDAB48006DA77C37132F5C12A8515846DAEA1276CECD2525FB9FB7A976A184D23AD5CE6454D9D2A9F4E8D17707C43AABA54CD7A8762E2F1613CDE87BFA012374BC2A68D24DD7370CF3F525E619705DD17ADD3A13628603D8D9AF812CAEDD0CBAC635E144829F1EDED69E4E2330AE8774247A1C102479C834C6D681897790651BFE435C7D895007E7CA51CE727D104EF87526CF105D5FF66DBAAC609C6E3BDBF4D02540B171E11E1367547DF82386C53B7AA5282020B3FA14784BD00331B3C404035A94D546DA50E2BFDEDD37D75EDE90CD2473C2D75FB2D6547");
		Fox1DBeacon result = new Fox1DBeacon();
		result.readExternal(data);
		FoxPictureDecoder decoder = new FoxPictureDecoder(result.getPictureScanLines());
		assertTrue(decoder.hasNext());
		TestUtil.assertImage("expected/fox1dPicture.png", decoder.next());
	}

}
